<!doctype html>
<html lang="en-us">
  <head>
    <title>Unbreaking a bike with code // Automate attention</title>
    <meta charset="utf-8" />
    <meta name="generator" content="Hugo 0.101.0" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="author" content="John Doe" />
    <meta name="description" content="" />
    <link rel="stylesheet" href="https://blog.brujordet.no/css/main.min.4c68b05cd7072e94a56c3a8acdd6f6e73fb7a62ba6e1bb047413ce09c4fea7a8.css" />

    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <link rel="shortcut icon" href="/favicon.ico">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">

    
    <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Unbreaking a bike with code"/>
<meta name="twitter:description" content="After wanting one for many years, I finally pulled the trigger and bought a 3D printer as a birthday gift to myself. And it&rsquo;s been a blast! I&rsquo;ve printed everything I&rsquo;ve gotten my hands on, but I have had this nagging feeling that I was just replicating, I wasn&rsquo;t creating.
One (un)lucky day day though, my son broke the chain guard on is bike. I jumped on the chance to prove myself and took some quick notes and then took a photo of it because paper always magically disappears for me."/>

    <meta property="og:title" content="Unbreaking a bike with code" />
<meta property="og:description" content="After wanting one for many years, I finally pulled the trigger and bought a 3D printer as a birthday gift to myself. And it&rsquo;s been a blast! I&rsquo;ve printed everything I&rsquo;ve gotten my hands on, but I have had this nagging feeling that I was just replicating, I wasn&rsquo;t creating.
One (un)lucky day day though, my son broke the chain guard on is bike. I jumped on the chance to prove myself and took some quick notes and then took a photo of it because paper always magically disappears for me." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://blog.brujordet.no/post/crafting/unbreaking_a_bike_with_code/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2022-07-21T09:04:50+02:00" />
<meta property="article:modified_time" content="2022-07-21T09:04:50+02:00" />



  </head>
  <body>
    <header class="app-header">
      <a href="https://blog.brujordet.no/"><img class="app-header-avatar" src="/avatar.png" alt="John Doe" /></a>
      <h1>Automate attention</h1>
      <p>Tools and techniques I use to make life easier</p>
      <a href="https://blog.brujordet.no//about">About me</a>
      <div class="app-header-social">
        
          <a target="_blank" href="https://twitter.com/brujoand" rel="noreferrer noopener"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-twitter">
  <title>twitter</title>
  <path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"></path>
</svg></a>
        
          <a target="_blank" href="https://www.linkedin.com/in/brujoand" rel="noreferrer noopener"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-linkedin">
  <title>linkedin</title>
  <path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path><rect x="2" y="9" width="4" height="12"></rect><circle cx="4" cy="4" r="2"></circle>
</svg></a>
        
          <a target="_blank" href="https://www.github.com/brujoand" rel="noreferrer noopener"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-github">
  <title>github</title>
  <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path>
</svg></a>
        
      </div>
      <a href="https://blog.brujordet.no//index.xml">RSS</a>
    </header>
    <main class="app-container">
      
  <article class="post">
    <header class="post-header">
      <h1 class ="post-title">Unbreaking a bike with code</h1>
      <div class="post-meta">
        <div>
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-calendar">
  <title>calendar</title>
  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line>
</svg>
          Jul 21, 2022
        </div>
        <div>
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-clock">
  <title>clock</title>
  <circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline>
</svg>
          5 min read
        </div><div>
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tag">
  <title>tag</title>
  <path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7" y2="7"></line>
</svg>
          <a class="tag" href="https://blog.brujordet.no/tags/crafting/">crafting</a><a class="tag" href="https://blog.brujordet.no/tags/diy/">diy</a><a class="tag" href="https://blog.brujordet.no/tags/3d-printing/">3d-printing</a><a class="tag" href="https://blog.brujordet.no/tags/jscad/">jscad</a><a class="tag" href="https://blog.brujordet.no/tags/cad/">cad</a></div></div>
    </header>
    <div class="post-content">
      <p>After wanting one for many years, I finally pulled the trigger and bought
a 3D printer as a birthday gift to myself. And it&rsquo;s been a
blast! I&rsquo;ve printed everything I&rsquo;ve gotten my hands on, but I have had this nagging
feeling that I was just replicating, I wasn&rsquo;t creating.</p>
<p>One (un)lucky day day though, my son broke the chain guard on is bike. I jumped
on the chance to prove myself and took some quick notes and then took a photo of
it because paper always magically disappears for me.</p>
<img src="/guard_chain_sketch.jpg" alt="My notes" width="100%"/>
<p>With all the measurements ready I started researching CAD (computer-aided design) tools, to figure out
which one would be easiest to use. As it turned out, I hated all of them. They
all look pretty slick and have a gazillion features, but the learning curve was
steep and there was so much lingo I didn&rsquo;t understand. I&rsquo;ve never really liked
graphical tools anyway to be honest. The mouse is cumbersome to use and the menus are always a nightmare
to navigate. Eventually though I stumbled upon <a href="https://github.com/jscad/OpenJSCAD.org">JSCAD</a>. A piece of software that let&rsquo;s
me write JavaScript that renders a 3d model. Perfect! :D</p>
<p>With some fairly simple code, I could render a cylinder.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">jscad</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">require</span>(<span style="color:#e6db74">&#39;@jscad/modeling&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> { <span style="color:#a6e22e">cylinder</span> } <span style="color:#f92672">=</span> <span style="color:#a6e22e">jscad</span>.<span style="color:#a6e22e">primitives</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">mainCircleRadius</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">82.5</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">mainCircleThickness</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">3</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">main</span> () {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">cylinder</span>({
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">radius</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">mainCircleRadius</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">height</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">mainCircleThickness</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">center</span><span style="color:#f92672">:</span> [<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">0</span>,<span style="color:#a6e22e">mainCircleThickness</span><span style="color:#f92672">/</span><span style="color:#ae81ff">2</span>],
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">segments</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">64</span>
</span></span><span style="display:flex;"><span>  })
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">module</span>.<span style="color:#a6e22e">exports</span> <span style="color:#f92672">=</span> { <span style="color:#a6e22e">main</span> }
</span></span></code></pre></div><img src="/chain_guard_cylinder.png" alt="I made a cylinder" width="100%"/>
<p>So I&rsquo;m creating a cylinder with my specified radius and height, and I&rsquo;m defining
the center position of the object to be x=0 and y=0, so in the center. But I&rsquo;m
putting it up half it&rsquo;s height in the z axis, so the model will lay on z height
0. This makes it easier to plate things in relation to eachother.
The segments parameter defines how many straight segments should be used to
make up the circle. With segments set to 5, we would get a pentagon, with 64
instead we get a fairly smooth circle.</p>
<p>What I actually wanted though was a nice flat circle with a width of 2 cm, so
the next step was to create a hole in the cylinder.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#66d9ef">const</span> { <span style="color:#a6e22e">subtract</span> } <span style="color:#f92672">=</span> <span style="color:#a6e22e">jscad</span>.<span style="color:#a6e22e">booleans</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">mainCircleRadius</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">82.5</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">mainCircleWidth</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">20</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">mainCircleThickness</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">3</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">generateMainCircle</span>() {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">mainCircleOuter</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">cylinder</span>({
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">radius</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">mainCircleRadius</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">height</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">mainCircleThickness</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">center</span><span style="color:#f92672">:</span> [<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">0</span>,<span style="color:#a6e22e">mainCircleThickness</span><span style="color:#f92672">/</span><span style="color:#ae81ff">2</span>],
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">segments</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">64</span>})
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">mainCircleInner</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">cylinder</span>({
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">radius</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">mainCircleRadius</span> <span style="color:#f92672">-</span> <span style="color:#a6e22e">mainCircleWidth</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">height</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">mainCircleThickness</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">center</span><span style="color:#f92672">:</span> [<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">0</span>,<span style="color:#a6e22e">mainCircleThickness</span><span style="color:#f92672">/</span><span style="color:#ae81ff">2</span>],
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">segments</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">64</span>
</span></span><span style="display:flex;"><span>  })
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">subtract</span>(<span style="color:#a6e22e">mainCircleOuter</span>, <span style="color:#a6e22e">mainCircleInner</span>)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>I imported the subtract function, added some variables and pulled this into it&rsquo;s
own little function. One big cylinder as before, and a slightly smaller cylinder
and then I simply subtracted the small one from the big one. Behold the hole!</p>
<img src="/chain_guard_circle.png" alt="I made a circle" width="100%"/>
<p>Next I created yet another circle and attached it to the first to make an L shaped rim.
Basically this thing is what creates the guard which keeps the chain in place.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#66d9ef">const</span> { <span style="color:#a6e22e">union</span> } <span style="color:#f92672">=</span> <span style="color:#a6e22e">jscad</span>.<span style="color:#a6e22e">booleans</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">rimWidth</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">3</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">rimThickness</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">9</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">rimRadius</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">mainCircleRadius</span> <span style="color:#f92672">-</span> <span style="color:#a6e22e">mainCircleWidth</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">rimWidth</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">generateRim</span>() {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">rimOuter</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">cylinder</span>({
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">radius</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">rimRadius</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">height</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">rimThickness</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">center</span><span style="color:#f92672">:</span> [<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">0</span>,<span style="color:#a6e22e">rimThickness</span><span style="color:#f92672">/</span><span style="color:#ae81ff">2</span>],
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">segments</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">64</span>
</span></span><span style="display:flex;"><span>  })
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">rimInner</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">cylinder</span>({
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">radius</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">rimRadius</span> <span style="color:#f92672">-</span> <span style="color:#a6e22e">rimWidth</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">height</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">rimThickness</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">center</span><span style="color:#f92672">:</span> [<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">0</span>,<span style="color:#a6e22e">rimThickness</span><span style="color:#f92672">/</span><span style="color:#ae81ff">2</span>],
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">segments</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">64</span>
</span></span><span style="display:flex;"><span>  })
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">subtract</span>(<span style="color:#a6e22e">rimOuter</span>, <span style="color:#a6e22e">rimInner</span>)
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">main</span> (){
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">mainCircle</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">generateMainCircle</span>()
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">rim</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">generateRim</span>()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">union</span>(<span style="color:#a6e22e">mainCircle</span>, <span style="color:#a6e22e">rim</span>)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><img src="/chain_guard_rim.png" alt="Now with a rim" width="100%"/>
<p>So now there is a rim, but this thing needs to be attached to the cog of
the chain somehow. Enter the tooth, and it&rsquo;s &ldquo;tooth hole&rdquo;. I seriously had no
idea what to call this, but you get the point I hope.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">toothCount</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">5</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">toothRadius</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">10</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">toothConnectorLength</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">10</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">toothThickness</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">9</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">toothConnectorPositionX</span> <span style="color:#f92672">=</span> (<span style="color:#a6e22e">mainCircleRadius</span> <span style="color:#f92672">-</span> <span style="color:#a6e22e">mainCircleWidth</span>) <span style="color:#f92672">-</span> (<span style="color:#a6e22e">toothRadius</span> <span style="color:#f92672">/</span> <span style="color:#ae81ff">2</span> )
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">toothPositionX</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">toothConnectorPositionX</span> <span style="color:#f92672">-</span> (<span style="color:#a6e22e">toothConnectorLength</span> <span style="color:#f92672">/</span> <span style="color:#ae81ff">2</span>) <span style="color:#f92672">-</span> <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">nutClearingRadius</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">3.75</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">nutRadius</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">generateTooth</span>() {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">toothCircle</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">cylinder</span>({
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">radius</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">toothRadius</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">height</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">toothThickness</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">center</span><span style="color:#f92672">:</span> [<span style="color:#a6e22e">toothPositionX</span>,<span style="color:#ae81ff">0</span>,<span style="color:#a6e22e">toothThickness</span><span style="color:#f92672">/</span><span style="color:#ae81ff">2</span>],
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">segments</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">24</span>
</span></span><span style="display:flex;"><span>  })
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">toothConnector</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">cuboid</span>({
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">size</span><span style="color:#f92672">:</span> [<span style="color:#a6e22e">toothConnectorLength</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">toothRadius</span> <span style="color:#f92672">*</span> <span style="color:#ae81ff">2</span>, <span style="color:#a6e22e">toothThickness</span>],
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">center</span><span style="color:#f92672">:</span> [<span style="color:#a6e22e">toothConnectorPositionX</span>,<span style="color:#ae81ff">0</span>,<span style="color:#a6e22e">toothThickness</span><span style="color:#f92672">/</span><span style="color:#ae81ff">2</span>]
</span></span><span style="display:flex;"><span>  })
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">toothNutClearingHole</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">cylinder</span>({
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">radius</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">nutClearingRadius</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">height</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">toothThickness</span><span style="color:#f92672">/</span><span style="color:#ae81ff">2</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">center</span><span style="color:#f92672">:</span> [<span style="color:#a6e22e">toothPositionX</span>,<span style="color:#ae81ff">0</span>,<span style="color:#a6e22e">toothThickness</span><span style="color:#f92672">/</span><span style="color:#ae81ff">4</span>],
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">segments</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">12</span>
</span></span><span style="display:flex;"><span>  })
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">toothNutHole</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">cylinder</span>({
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">radius</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">nutRadius</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">height</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">toothThickness</span><span style="color:#f92672">-</span><span style="color:#ae81ff">2</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">center</span><span style="color:#f92672">:</span> [<span style="color:#a6e22e">toothPositionX</span>,<span style="color:#ae81ff">0</span>,<span style="color:#a6e22e">toothThickness</span> <span style="color:#f92672">-</span> (<span style="color:#a6e22e">toothThickness</span><span style="color:#f92672">/</span><span style="color:#ae81ff">4</span>)],
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">segments</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">64</span>
</span></span><span style="display:flex;"><span>  })
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">tooth</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">union</span>(<span style="color:#a6e22e">toothCircle</span>, <span style="color:#a6e22e">toothConnector</span>)
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">nut</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">union</span>(<span style="color:#a6e22e">toothNutClearingHole</span>, <span style="color:#a6e22e">toothNutHole</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">subtract</span>(<span style="color:#a6e22e">tooth</span>, <span style="color:#a6e22e">nut</span>)
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">main</span> (){
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">mainCircle</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">generateMainCircle</span>()
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">rim</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">generateRim</span>()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">tooth</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">generateTooth</span>()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">single_tooth_chain_guard</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">union</span>(<span style="color:#a6e22e">union</span>(<span style="color:#a6e22e">mainCircle</span>, <span style="color:#a6e22e">rim</span>), <span style="color:#a6e22e">tooth</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">single_tooth_chain_guard</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><img src="/chain_guard_single_tooth.png" alt="I made a tooth" width="100%"/>
<p>This basically just adds another function which generates a &ldquo;toothCircle&rdquo; where
we place the &ldquo;nut hole&rdquo; or screw hole I guess would be a better name and the
toothNutClearingHole which is where the head of the screw should fit. To get a
good attachment to the rest of the design I added a cuboid to the circle which
would then fit onto the main body of the chain guard.</p>
<p>Now I just had to copy that tooth out to 4 other spots on the chain guard, which
was surprisingly simple.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">main</span> (){
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">mainCircle</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">generateMainCircle</span>()
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">rim</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">generateRim</span>()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">tooth</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">generateTooth</span>()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">single_tooth_chain_guard</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">union</span>(<span style="color:#a6e22e">union</span>(<span style="color:#a6e22e">mainCircle</span>, <span style="color:#a6e22e">rim</span>), <span style="color:#a6e22e">tooth</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">toothAngle</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">degToRad</span>(<span style="color:#ae81ff">360</span><span style="color:#f92672">/</span><span style="color:#a6e22e">toothCount</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">full_chain_guard</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">single_tooth_chain_guard</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">i</span> <span style="color:#f92672">&lt;</span> <span style="color:#a6e22e">toothCount</span>; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">rotated_chain_guard</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">rotateZ</span>(<span style="color:#a6e22e">toothAngle</span>, <span style="color:#a6e22e">full_chain_guard</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">full_chain_guard</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">union</span>(<span style="color:#a6e22e">full_chain_guard</span>, <span style="color:#a6e22e">rotated_chain_guard</span>)
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">full_chain_guard</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><img src="/chain_guard_complete.png" alt="And it's done!" width="100%"/>
<p>The for loop rotates our chain guard and adds another tooth for each iteration,
until we finally have all 5 of them.</p>
<p>Now it&rsquo;s just a matter of preparing the model for my printer, and fire it up!</p>
<img src="/guard_chain_printing.jpg" alt="Look at it go!" width="100%"/>
<p>Once it was done I printed another one for the backside and I could finally
attach it. Or at least I&rsquo;m in the process of doing that here.</p>
<img src="/guard_chain_complete.jpg" alt="Shiny!" width="100%"/>
<p>This was actually much easier and more fun than I had feared. You can view my
JavaScript code in all it&rsquo;s beauty
<a href="https://github.com/brujoand/XYZ-models/blob/master/bicycle_chain_guard/bicycle_chain_guard.js">here</a>
and Github also supports viewing STLs in the browser so you could also play with
the finished model over
<a href="https://github.com/brujoand/XYZ-models/blob/master/bicycle_chain_guard/bicycle_chain_guard.stl">here</a></p>

    </div>
    <div class="post-footer">
      
    </div>
  </article>

    </main>
  </body>
</html>
